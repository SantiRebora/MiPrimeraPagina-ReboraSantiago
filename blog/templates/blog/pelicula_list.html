{% extends "blog/base.html" %}

{% block content %}

<h2 class="mb-4">ðŸŽ¬ Listado de PelÃ­culas</h2>

<hr>

{% if peliculas %}
    {% for pelicula in peliculas %}
        <div class="card mb-4 shadow-sm">
            <div class="card-body">

                <h4 class="card-title">
                    {{ pelicula.titulo }}
                    <span class="badge bg-primary">
                        {{ pelicula.genero.nombre }}
                    </span>
                </h4>

                <div class="mb-2">
                    {% for i in "12345" %}
                        {% if forloop.counter <= pelicula.puntuacion %}
                            <span class="text-warning fs-5">â˜…</span>
                        {% else %}
                            <span class="text-secondary fs-5">â˜…</span>
                        {% endif %}
                    {% endfor %}
                </div>

                <p class="card-text text-muted">
                    {{ pelicula.sinopsis|truncatewords:25 }}
                </p>

                <a href="{% url 'blog:pelicula-detail' pelicula.pk %}" class="btn btn-outline-primary btn-sm">
                    Ver detalle
                </a>
                <a href="{% url 'blog:pelicula-update' pelicula.pk %}" class="btn btn-outline-secondary btn-sm">
                    Editar
                </a>
                <a href="{% url 'blog:pelicula-delete' pelicula.pk %}" class="btn btn-outline-danger btn-sm">
                    Eliminar
                </a>

            </div>
        </div>
    {% endfor %}
{% else %}
    <div class="alert alert-info text-center">
        ðŸŽ¬ No hay pelÃ­culas cargadas todavÃ­a.
    </div>
{% endif %}

<hr class="my-5">

<h3 class="mb-3">ðŸ”Ž Buscar PelÃ­culas</h3>

<form method="get" class="card card-body shadow-sm mb-5">
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">
        Buscar
    </button>
</form>

{% endblock %}